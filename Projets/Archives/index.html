<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Archives</title>
   <link rel="icon" href="../../Sources/Images/Archives.webp" type="image/webp" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      background: #000;
      font-family: 'Quicksand', sans-serif;
      overflow: hidden;
    }

    canvas {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    #returnButton {
      position: fixed;
      top: 20px;
      left: 20px;
      background: none;
      border: none;
      color: white;
      font-size: 14px;
      cursor: pointer;
      z-index: 30;
      opacity: 0.7;
      font-family: inherit;
    }

    #returnButton:hover {
      opacity: 0.5;
    }

    #volumeControl {
      position: fixed;
      top: 92%;
      right: 15px;
      transform: translateY(-50%) rotate(-90deg);
      z-index: 15;
      opacity: 0.6;
    }

    #volumeSlider {
      width: 80px;
      height: 4px;
      appearance: none;
      background: white;
      border-radius: 10px;
    }

    #volumeSlider::-webkit-slider-thumb {
      appearance: none;
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      cursor: pointer;
    }

    #jeromeTrigger {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100px;
      height: 100px;
      cursor: pointer;
      z-index: 10;
      animation: float 6s ease-in-out infinite;
      transition: opacity 1.5s ease;
      pointer-events: auto;
    }

    #jeromeTrigger.hidden {
      opacity: 0;
      pointer-events: none;
    }

    @keyframes float {
      0% {
        transform: translate(-50%, -50%) translateY(0);
      }

      50% {
        transform: translate(-50%, -50%) translateY(-10px);
      }

      100% {
        transform: translate(-50%, -50%) translateY(0);
      }
    }

    #textContainer {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      max-width: 80%;
      color: white;
      font-size: 1.2em;
      opacity: 0;
      z-index: 20;
      pointer-events: none;
      transition: opacity 1s ease, transform 1s ease;
    }

    #textContainer.visible {
      opacity: 1;
      transform: translate(-50%, -50%) translateY(0);
      pointer-events: auto;
    }

    .nav-buttons {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 30px;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .nav-buttons.visible {
      opacity: 1;
    }

    .nav-buttons button {
      background: none;
      border: none;
      color: white;
      font-size: 16px;
      margin: 0 20px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s;
      font-family: inherit;
    }

    .nav-buttons button:hover {
      opacity: 1;
    }

    .nav-buttons button:disabled {
      opacity: 0.2;
      cursor: default;
    }

    @media (max-width: 600px) {
      #volumeControl {
        display: none;
      }

      .nav-buttons {
        flex-direction: row;
        justify-content: center;
        align-items: center;
        margin-top: 50px;
        gap: 24px;
      }

      .nav-buttons button {
        margin: 0;
        padding: 10px 16px;
      }
    }
  </style>
</head>

<body>

  <button id="returnButton" onclick="window.location.href='../../index.html'">Menu</button>
  <div id="volumeControl">
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.3" />
  </div>
  <img id="jeromeTrigger" src="../../Sources/Images/jerome.webp" alt="Commencer" />
  <div id="textContainer">
    <div id="textContent">...</div>
    <div class="nav-buttons" id="navButtons">
      <button id="prevBtn" onclick="prevStep()">Précédent</button>
      <button id="nextBtn" onclick="nextStep()">Suivant</button>
    </div>
  </div>
  <audio id="backgroundMusic" src="../../Sources/Sons/1.mp3" preload="auto"></audio>
  <audio id="miaouSound" src="../../Sources/Sons/miaou.mp3" preload="auto"></audio>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <script>
    let scene, camera, renderer, stars;
    let currentStep = 0;
    const texts = [
      "ArchiveFever.Work, à la base, c’était juste un portfolio. Un endroit pour poser mes trucs, mes idées.",
      "Mais plus j’avançais, plus je voyais des gens autour de moi galérer à exister en ligne.",
      "Pas parce qu’ils manquent de talent. Juste parce qu’ils ont personne pour les mettre en lumière.",
      "Alors j’ai décidé de transformer ce site en quelque chose de plus grand. Plus utile. Plus juste.",
      "Je veux que ce soit un espace pour eux : les créateurs, les passionnés, les oubliés du système.",
      "Des gens qui méritent d’être vus. Entendus. Reconnus. Et parfois, juste encouragés à continuer.",
      "Je ne suis pas une agence, je ne suis pas une marque. Je suis juste quelqu’un qui veut aider.",
      "Je code, je crée, je design — pour rendre les choses plus belles, plus accessibles, plus vraies.",
      "Ici tu trouveras des pages vitrines pour ceux que je soutiens. Des projets solides, faits avec le cœur.",
      "Mais aussi, parfois, des idées un peu folles. Des trucs drôles, décalés, qui donnent juste le sourire.",
      "Parce que la visibilité, c’est pas que pour ‘réussir’. C’est aussi pour respirer, pour s’exprimer, pour exister.",
      "ArchiveFever.Work, c’est mon cri contre l’indifférence. C’est ma façon de dire : ‘toi aussi, t’as le droit d’être vu’.",
      "Et si t’es là, c’est peut-être pas un hasard. Bienvenue dans l’archive."
    ];

    function initScene() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 100;

      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      const sky = new THREE.Mesh(
        new THREE.SphereGeometry(500, 64, 64),
        new THREE.ShaderMaterial({
          uniforms: {
            topColor: { value: new THREE.Color(0x050510) },
            bottomColor: { value: new THREE.Color(0x000007) }
          },
          vertexShader: `
            varying vec3 vWorldPosition;
            void main() {
              vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,
          fragmentShader: `
            uniform vec3 topColor;
            uniform vec3 bottomColor;
            varying vec3 vWorldPosition;
            void main() {
              float h = normalize(vWorldPosition).y;
              vec3 color = mix(bottomColor, topColor, (h + 1.0) / 2.0);
              gl_FragColor = vec4(color, 1.0);
            }
          `,
          side: THREE.BackSide
        })
      );
      scene.add(sky);

      const starGeometry = new THREE.BufferGeometry();
      const starCount = 2000;
      const positions = new Float32Array(starCount * 3);
      for (let i = 0; i < starCount * 3; i++) {
        positions[i] = (Math.random() - 0.5) * 1000;
      }
      starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      const starMaterial = new THREE.PointsMaterial({
        color: 0xffffff,
        size: 0.7,
        transparent: true,
        opacity: 0.7
      });
      stars = new THREE.Points(starGeometry, starMaterial);
      scene.add(stars);
    }

    function animate() {
      requestAnimationFrame(animate);
      stars.rotation.y += 0.0004;
      stars.rotation.x += 0.00015;
      renderer.render(scene, camera);
    }

    initScene();
    animate();

    const backgroundMusic = document.getElementById('backgroundMusic');
    const miaouSound = document.getElementById('miaouSound');
    const jeromeTrigger = document.getElementById('jeromeTrigger');
    const textContainer = document.getElementById('textContainer');
    const textContent = document.getElementById('textContent');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const navButtons = document.getElementById('navButtons');
    const volumeSlider = document.getElementById('volumeSlider');

    backgroundMusic.loop = false;
    backgroundMusic.volume = 0.3;
    miaouSound.volume = 0.3;

    jeromeTrigger.addEventListener('click', async () => {
      try {
        await backgroundMusic.play();
        miaouSound.currentTime = 0;
        miaouSound.play();
      } catch (e) { console.error("Playback failed", e); }
      jeromeTrigger.classList.add('hidden');
      setTimeout(() => jeromeTrigger.style.display = "none", 1500);
      showStep(0);
    });

    function showStep(index) {
      currentStep = index;
      textContainer.classList.remove('visible');
      navButtons.classList.remove('visible');
      setTimeout(() => {
        textContent.textContent = texts[currentStep];
        textContainer.classList.add('visible');
        updateButtons();
        setTimeout(() => {
          navButtons.classList.add('visible');
        }, 500);
      }, 500);
    }

    function nextStep() {
      if (currentStep < texts.length - 1) {
        showStep(currentStep + 1);
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        showStep(currentStep - 1);
      }
    }

    function updateButtons() {
      prevBtn.disabled = currentStep === 0;
      nextBtn.disabled = currentStep === texts.length - 1;
    }

    volumeSlider.addEventListener('input', () => {
      const vol = volumeSlider.value;
      backgroundMusic.volume = vol;
      miaouSound.volume = vol;
    });

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>

</html>